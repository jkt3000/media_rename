#!/usr/bin/env ruby

$LOAD_PATH.unshift File.expand_path(File.join(File.dirname(__FILE__), "../lib"))

require "bundler/setup"
require "media_rename"
require 'thor'


class MediaRenameCLI < Thor


  desc "rename_from_plex <path>", "Renames media files from plexDB"
  method_option :preview,
                type: :boolean,
                default: false,
                desc: "Dry run - don't actually make changes"
  method_option :plex_library,
                type: :string,
                aliases: 'p',
                desc: "Plex Library to search against"

  def rename_from_plex(path)
    params = options.inject({}){|memo,(k,v)| memo[k.to_sym] = v; memo}
    renamer = MediaRename::PlexRenamer.new(path, params)
    renamer.run
  end
  

  private

end


MediaRenameCLI.start